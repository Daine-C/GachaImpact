 <VirtualHost *:80>
    ServerName 192.168.1.7

    # Disable directory listing and enable symlinks
    <Directory />
        Options -Indexes +FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # Security Headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0

    # Proxy configuration - MUST COME BEFORE FRONTEND PROXY
    ProxyRequests Off
    ProxyVia Off
    ProxyPreserveHost On

    # API Proxy - must come first
    <Location /api>
        ProxyPass http://localhost:3001/api nocanon
        ProxyPassReverse http://localhost:3001/api
    </Location>

    # Frontend Proxy
    ProxyPass / http://localhost:3000/ nocanon
    ProxyPassReverse / http://localhost:3000/

    ProxyTimeout 300

    # Error logging
    ErrorLog ${APACHE_LOG_DIR}/gachaimpact-01-error.log
    CustomLog ${APACHE_LOG_DIR}/gachaimpact-01-access.log combined
</VirtualHost>
